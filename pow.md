# Proof of Work (PoW) & Proof of Stack

## 比特幣的 PoW (Proof of Work)

在 sample code 當中的 PoW 是找一個 `y` 使得 `x * y` 經過 SHA-256 後的結果開頭為 4 個 0，所以 `y` 有多種符合的值。在比特幣挖礦的過程中，礦工是找一個 *nonce* (特殊數字)。

- **挖礦者必須找到一個 nonce**，使得區塊標頭的 SHA-256 值以一定數量的 0 開頭 (越多的 0 代表難度越高)
- 挖礦的難度會根據居快發現的速度動態調整
這個過程稱為 **工作量證明 (PoW)**

PoW 工作量證明英文全名為 Proof-of-Work，是全世界最早誕生的共識機制，也是比特幣（BTC）、萊特幣（LTC）、狗狗幣（DOGE）等早期區塊鏈所使用的共識機制。

PoW 機制的參與者稱為礦工（Miner），嘗試獲得獎勵的過程稱作挖礦（Mining）。PoW 挑選記帳者的方式是讓礦工們為一道困難的數學題計算出答案，**最先解出答案者，即獲得打包新區塊的資格，並獲得加密貨幣作為獎勵**。

值得一提的是，這道數學題的答案只能用「猜」的，礦工需要貢獻電腦算力嘗試猜出這個「隨機答案」。然而就算礦工擁有的運算能力再強大，至多只能提高猜中的可能性；也就是說，**算力差的礦工也有搶答成功並獲得挖礦獎勵的機會**。這使得 PoW 工作量證明擁有極高的去中心化程度與安全性，令其他共識機制望塵莫及。

然而，PoW 共識機制也有較難克服的缺點，比如為了確保區塊鏈的安全性，每一位礦工在驗證完區塊上的交易紀錄後，還必須耗費算力完成數學題目來爭取記帳權，不僅造成交易速度（出塊時間）緩慢，在挖礦過程中消耗的大量電力也有可能對環境造成負面影響。

![alt text](https://github.com/lucas6028/build-my-own-blockchain/blob/main/assets/images/pow.jpg)

---

## 共識機制 PoS 權益證明是什麼？
PoS 權益證明英文全名為 Proof-of-Stake，目的是改善 PoW 工作量證明耗費電力且傳輸速度慢的缺點，以太坊（ETH）、Cardano（ADA）區塊鏈皆使用 PoS 權益證明共識機制。

PoS 機制的參與者稱為驗證者（Validators），嘗試獲得獎勵的過程稱為質押（Staking）。PoS 挑選記帳者的方式，是要求驗證者將加密貨幣鎖定於該區塊鏈上（質押），**若質押的加密貨幣越多、質押的時間越長、距離成為記帳者的時間越久，被區塊鏈隨機選中成為記帳者的機率就越高**。  

若區塊鏈發現 PoS 驗證者進行惡意行為（批准無效交易），將會把驗證者鎖定的加密貨幣全數扣除作為懲罰（Slashing），以維持「誠實者比作惡者更有利有圖」的原則。

由於質押越多加密貨幣代表更容易獲得加密貨幣獎勵，**讓 PoS 比起 PoW 更存在著「大者恆大」的疑慮**，因此其去中心化程度可能較 PoW 低。另外，在驗證者不夠分散的情況下，很容易因為駭客攻擊導致該區塊鏈產生系統性風險，**所以 PoS 權益證明的安全性通常不如 PoW 工作量證明來得高**。

![alt text](https://github.com/lucas6028/build-my-own-blockchain/blob/main/assets/images/pos.jpg)

